define(["exports"],function(a){"use strict";function b(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function c(e,f,g){window.remoteUtagPromise=new Promise(function(a){window.remoteUtagReady=a});var h=(g?g+"://":"//")+"tags.tiqcdn.com/utag/dominos/"+e+"/"+f+"/utag.js",a=document,b="script",c=a.createElement(b);c.src=h,c.type="text/java"+b,c.async=!0,h=a.getElementsByTagName(b)[0],h.parentNode.insertBefore(c,h)}function d(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=["el","trackedEventType","eventData"];if("undefined"==typeof window.remoteUtagPromise||"function"!=typeof window.remoteUtagPromise.then)throw Error("window.remoteUtagPromise must be a Promise.");var c=Object.keys(a).filter(function(a){return!b.includes(a)}).reduce(function(b,c){return b[c]=a[c],b},{}),d=a.el?i.getTealiumVariablesFromDataDpzTrack(a.el):{},f=e({page_name:document.title,page_url:window.location.href,event_name:a.el&&i.getName(a.el),event_action:a.el&&i.getAction(a.el,a.trackedEventType)||"click",event_category:i.getCategory(a.el),event_label:a.el&&i.getLabel(a.el)||null},g(a.eventData),c,d);window.remoteUtagPromise.then(function(){window.utag.link(f)})}Object.defineProperty(a,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=void 0,h=function(a,b){return void 0===b?b=[a]:b.push(a),"BODY"!==a.nodeName&&null!==a.parentNode?h(a.parentNode,b):b},i={getName:function(a){return a.getAttribute("data-dpz-track-evt-name")||i.getNameFromContents(a)||a.getAttribute("value")||a.getAttribute("name")},getNameFromContents:function(a){if("SELECT"===a.nodeName&&a.value)return a.getAttribute("name")+" - "+a.value;if(/\S/.test(a.textContent))return a.textContent.trim();var b=a.querySelector("img");return b&&b.getAttribute("alt")},getNameFromInputLabel:function(){},getAction:function(a,b){return a.getAttribute("data-dpz-track-evt-type")||a.getAttribute("data-dpz-track-event-type")||b||"click"},getCategory:function(a){return a&&(a.getAttribute("data-dpz-track-evt-category")||a.getAttribute("data-dpz-track-event-category")||i.getCategoryFromContents(a)||a.getAttribute("type"))||"text"},getCategoryFromContents:function(a){return"BUTTON"===a.nodeName||"INPUT"===a.nodeName&&"submit"===a.type?"button":"SELECT"===a.nodeName?"select":a.querySelectorAll("img").length?"image":null},getLabel:function(a){return a.getAttribute("data-dpz-track-evt-label")||a.getAttribute("data-dpz-track-event-label")||i.getLabelFromAncestors(a)||null},getLabelFromAncestors:function(a){var b=h(a).find(function(a){return(document.documentElement.matches||document.documentElement.msMatchesSelector).call(a,"[data-dpz-track-group]")});return b&&b.getAttribute("data-dpz-track-group")},getTealiumVariablesFromDataDpzTrack:function(a){var b={},c=!0,d=!1,e=void 0;try{for(var f,g=a.attributes[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=h.name,j=h.value;i.startsWith("data-dpz-track-")&&(b[i.replace(/^data-dpz-track-(.*)/,"$1").replace(/-/g,"_")]=j)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return b}};a.default={init:function(a,e,i){var j=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,k=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},l=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"";if("string"!=typeof a)throw Error("tealiumProfile string must be provided to utag.init. Got "+("undefined"==typeof a?"undefined":f(a))+".");if("string"!=typeof e)throw Error("tealiumEnv string must be provided to utag.init. Got "+("undefined"==typeof e?"undefined":f(e))+".");if("function"!=typeof i)throw Error("_prepareUDO function must be provided to utag.init. Got "+("undefined"==typeof i?"undefined":f(i))+".");if(l&&!["https"].includes(l))throw new Error("protocol can only be \"https\". Got "+l);if(c(a,e,l),g=i,j){var m=function(a){document.body.addEventListener(a,function(b){var c=h(b.target).find(function(b){return(document.documentElement.matches||document.documentElement.msMatchesSelector).call(b,n[a].join(","))});c&&d({el:c,trackedEventType:a})})},n={click:["a","button:not([data-dpz-no-track])","input[type=\"submit\"]","[data-dpz-track-evt]"].concat(b(k.click||[])),change:["input[type=\"checkbox\"]","input[type=\"radio\"]","select"].concat(b(k.change||[]))};Object.keys(n).forEach(m)}},view:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if("undefined"==typeof window.remoteUtagPromise||"function"!=typeof window.remoteUtagPromise.then)throw Error("window.remoteUtagPromise must be a Promise.");var b=e({page_name:a.title||document.title,page_url:window.location.href},g(a.eventData));window.remoteUtagPromise.then(function(){window.utag.view(b)})},link:d}});
