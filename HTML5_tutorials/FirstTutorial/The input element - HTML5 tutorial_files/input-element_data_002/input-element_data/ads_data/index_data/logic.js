var helpers=createHelpers();var creative={selectors:[".main-container",".jellybean",".jellybean1",".jellybean2",".jellybean3",".logo",".replay",".legal-btn",".nameplate",".frames",".copies",".copy",".copy-f1",".copy-f2",".copy-f3",".ctas",".cta1",".cta2",".main-cta2",".legal-content",".legal-close",".main-legal",".bg-exit"],config:{isVisible:false},dom:{},timelines:{},rules:helpers.createStyleSheet(),timeouts:{resetStep1:null,resetStep2:null}};function createHelpers(){return{toCamelCase:function(b){var a="";if(b.indexOf("-")<0){return b.replace(/#|\./g,"")}b.replace(/#|\./g,"").split("-").forEach(function(d,c){var e=d.toLowerCase();a+=(c===0?e:e[0].toUpperCase()+e.slice(1))});return a},createStyleSheet:function(){var a=document.createElement("style");a.appendChild(document.createTextNode(""));document.head.appendChild(a);return a.sheet},createRule:function(c,b,a){creative.rules.insertRule(c+"{"+b+":"+a+";}",creative.rules.cssRules.length)},addListeners:function(a){a.forEach(function(b){b.obj.addEventListener(b.type,b.callback,false)})},removeNodeIfNoImage:function(b,a){if(!a){creative.dom.jellybean.removeChild(b)}},setCopy:function(a,b){if(b){a.innerHTML=b.replace(/{/g,"<sup>").replace(/}/g,"</sup>").replace(/\[/g,"<sub>").replace(/\]/g,"</sub>");return}creative.dom.frames.removeChild(a)},setBgImage:function(a,b){helpers.removeNodeIfNoImage(creative.dom[a],b);helpers.createRule("."+a,"background-image","url("+b+")")}}}function setup(){creative.selectors.forEach(function(a){creative.dom[helpers.toCamelCase(a)]=(a[0]===".")&&(document.querySelectorAll(a).length>1)?document.querySelectorAll(a):document.querySelector(a)})}function preInit(){setup();if(Enabler.isInitialized()){init()}else{Enabler.addEventListener(studio.events.StudioEvent.INIT,init)}}function init(){addDynamic();addListeners();if(Enabler.isVisible()){politeInit()}else{Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,politeInit)}}function politeInit(){show();starCssAnimations()}function validateOverlapping(){var a=creative.dom.nameplate.offsetHeight;if(a>40){creative.dom.nameplate.classList.add("letter-spacing")}[creative.dom.copyF1,creative.dom.copyF2,creative.dom.copyF3].forEach(function(b){var c=b.offsetHeight;if(c>40){b.classList.add("letter-spacing-copy-first");c=b.offsetHeight;if(c>40){b.classList.add("letter-spacing-copy-second")}}});creative.dom.copies.classList.remove("invisible")}function addDynamic(){creative.dom.mainContainer.classList.add(dynamicContent.parent[0].creative_template);creative.dom.ctas.classList.add(dynamicContent.ctas[0].theme);creative.dom.cta1.innerHTML=dynamicContent.ctas[0].text_cta1;creative.dom.cta2.innerHTML=dynamicContent.ctas[0].text_cta2;helpers.createRule(".main-container","background-color",dynamicContent.messages[0].background_color);helpers.createRule(".copies","color",dynamicContent.messages[0].font_color);helpers.createRule(".logo","background-image","url("+dynamicContent.parent[0].logo.Url+")");validateColorsCta("cta1");validateColorsCta("cta2");helpers.setCopy(creative.dom.legalContent,dynamicContent.messages[0].legal.replace(/\n/g,"<br />"));helpers.setCopy(creative.dom.nameplate,dynamicContent.parent[0].nameplate_text);helpers.setCopy(creative.dom.copyF1,dynamicContent.messages[0].copy_1);helpers.setCopy(creative.dom.copyF2,dynamicContent.messages[0].copy_2);helpers.setCopy(creative.dom.copyF3,dynamicContent.messages[0].copy_3);if(dynamicContent.parent[0].creative_template.search("lifestyle")>-1){helpers.setBgImage("jellybean1",dynamicContent.messages[0].image_1.Url);helpers.setBgImage("jellybean2",dynamicContent.messages[0].image_2.Url);helpers.setBgImage("jellybean3",dynamicContent.messages[0].image_3.Url)}else{helpers.setBgImage("jellybean1",dynamicContent.endemic_images[0].endemic_image.Url)}adjustCtas()}function validateColorsCta(a){if(dynamicContent.parent[0].layout==="lifestyle_art_full"){if(dynamicContent.ctas[0]["fill_color_"+a]){helpers.createRule(".main-container .ctas.bar .main-"+a,"background-color",dynamicContent.ctas[0]["fill_color_"+a])}if(dynamicContent.ctas[0]["text_color_"+a]){helpers.createRule(".main-container .ctas .main-"+a,"color",dynamicContent.ctas[0]["text_color_"+a])}if(dynamicContent.ctas[0]["hover_fill_color_"+a]){helpers.createRule(".main-container .ctas.bar .main-"+a+":hover","background-color",dynamicContent.ctas[0]["hover_fill_color_"+a])}if(dynamicContent.ctas[0]["hover_text_color_"+a]){helpers.createRule(".main-container .ctas .main-"+a+":hover","color",dynamicContent.ctas[0]["hover_text_color_"+a])}}else{if(dynamicContent.ctas[0]["fill_color_"+a]){helpers.createRule(".main-container .ctas.fill .cta."+a+",.main-container .ctas.bar .cta."+a,"background-color",dynamicContent.ctas[0]["fill_color_"+a])}if(dynamicContent.ctas[0]["text_color_"+a]){helpers.createRule(".main-container .ctas .cta."+a,"color",dynamicContent.ctas[0]["text_color_"+a])}if(dynamicContent.ctas[0]["hover_fill_color_"+a]){helpers.createRule(".main-container .ctas.fill .cta."+a+":hover,.main-container .ctas.bar .cta."+a+":hover","background-color",dynamicContent.ctas[0]["hover_fill_color_"+a])}if(dynamicContent.ctas[0]["hover_text_color_"+a]){helpers.createRule(".main-container .ctas .cta."+a+":hover","color",dynamicContent.ctas[0]["hover_text_color_"+a])}if(dynamicContent.ctas[0]["border_color_"+a]){helpers.createRule(".main-container .ctas.fill .cta."+a,"border-color",dynamicContent.ctas[0]["border_color_"+a])}if(dynamicContent.ctas[0]["hover_border_color_"+a]){helpers.createRule(".main-container .ctas.fill .cta."+a+":hover","border-color",dynamicContent.ctas[0]["hover_border_color_"+a])}}}function adjustCtas(){if(dynamicContent.ctas[0].text_cta2===""){creative.dom.mainCta2.classList.add("hide");creative.dom.mainContainer.classList.add("single-cta")}}function addListeners(){helpers.addListeners([{obj:creative.dom.mainContainer,type:"mouseenter",callback:handlers.onOver},{obj:creative.dom.cta1,type:"click",callback:handlers.onCta1Exit},{obj:creative.dom.cta2,type:"click",callback:handlers.onCta2Exit},{obj:creative.dom.bgExit,type:"click",callback:handlers.onExit},{obj:creative.dom.replay,type:"mousedown",callback:handlers.onReload},{obj:creative.dom.legalBtn,type:"mousedown",callback:handlers.onBtnLegalOpen},{obj:creative.dom.legalClose,type:"mousedown",callback:handlers.onBtnLegalClose},{obj:document,type:"visibilitychange",callback:handlers.onVisibilityChange}])}function show(){creative.dom.mainContainer.style.display="block";setTimeout(function(){validateOverlapping()},0)}function starCssAnimations(){creative.dom.mainContainer.classList.add("animated")}function jumpToLastFrame(){creative.dom.mainContainer.classList.remove("animated");creative.dom.mainContainer.classList.remove("animation_done");creative.dom.mainContainer.classList.add("animation_done")}var handlers={onOver:function(){var a="hover";Enabler.counter(a,true)},onExit:function(){var a="vlp_background";Enabler.exitOverride(a,dynamicContent.messages[0].background_exit.Url);jumpToLastFrame()},onCta1Exit:function(){var a="cta_1_dyn";Enabler.exitOverride(a,dynamicContent.ctas[0].exit_cta1.Url);jumpToLastFrame()},onCta2Exit:function(){var a="cta_2_dyn";Enabler.exitOverride(a,dynamicContent.ctas[0].exit_cta2.Url);jumpToLastFrame()},onBtnLegalOpen:function(){creative.dom.mainLegal.scrollTop=0;var a="legal-open";Enabler.counter(a,true)},onBtnLegalClose:function(){var a="legal-close";Enabler.counter(a,true)},onReload:function(){var a="replay";Enabler.counter(a,true);clearTimeout(creative.timeouts.resetStep1);clearTimeout(creative.timeouts.resetStep2);creative.dom.mainContainer.classList.add("kill-animation");creative.timeouts.resetStep1=setTimeout(function(){creative.dom.mainContainer.classList.remove("animated");creative.dom.mainContainer.classList.remove("animation_done");creative.dom.mainContainer.classList.remove("kill-animation")},100);creative.timeouts.resetStep2=setTimeout(function(){creative.dom.mainContainer.classList.add("animated")},120)},onVisibilityChange:function(){jumpToLastFrame()}};window.addEventListener("load",preInit);